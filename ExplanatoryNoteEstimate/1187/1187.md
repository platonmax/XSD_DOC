# Задача 1187 — ExplanatoryNoteEstimate (ПЗ), визуалка, пункт 3

## Контекст
В XSL-визуализации ПЗ (схема `ExplanatoryNoteEstimate`, версия 4.1) в пункте 3 формы есть условие, которое должно фильтровать вывод коэффициентов по признаку «обоснование начинается с цифры». Сейчас используется сравнение выражения с самим собой:

`number(substring(Reason,1,1)) = number(substring(Reason,1,1))`

Из-за этого логика воспринимается как некорректная/нечитабельная и даёт неверные срабатывания (в частности, пустое значение проходит как число `0`).

## История
- 2025-12-17 12:27: Создана папка задачи, зафиксировано место в `ExplanatoryNoteEstimate/ExplanatoryNoteEstimate.xsl` (пункт 3, блок таблицы коэффициентов); далее — правка условия и smoke-проверка трансформации.
- 2025-12-17 12:28: Условие заменено на `matches(normalize-space(Reason), '^[0-9]')`; выполнена smoke-трансформация Saxon (XSL компилируется, ошибок выполнения нет). Осталось: проверить на реальном XML ПЗ с коэффициентами (Reason: пусто/буква/цифра) и подтвердить ожидаемый вывод.
- 2025-12-17 12:34: Прогнан предоставленный пример `ExplanatoryNoteEstimate/Пример_ПЗ_наш.xml` → `ExplanatoryNoteEstimate/1187/Пример_ПЗ_наш.html`. Вывод без ошибок Saxon, но `<body/>` пустой: текущая XSL применяет шаблон к `/Construction`, а в примере корневой элемент `GgeExplanatoryNote` в namespace `http://gge.ru/schema/PZ/Monolith-Absolute-Final` (структура/схема отличается).
- 2025-12-17 12:38: Зафиксировано ожидаемое по XSD 4.1: корень — `Construction` (без namespace), коэффициенты — `Construction/ExplanatoryNoteEstimate/Coefficients/Coefficient` с полями `Name`, `Reason` и значениями в `Values/Value/Target` + `CoefValue`.
- 2025-12-17 12:47: Исходный пример сохранён как `ExplanatoryNoteEstimate/1187/Пример_ПЗ_наш_monolith.xml`, подготовлен новый валидный пример под XSD 4.1 и текущую визуалку: `ExplanatoryNoteEstimate/Пример_ПЗ_наш.xml`. Прогон Saxon: `ExplanatoryNoteEstimate/1187/Пример_ПЗ_наш_4_1.html` (таблица коэффициентов выводится, строка с `Reason`, начинающимся не с цифры, отфильтрована). Валидация: `xmlschema` — схема валидна, пример валиден (XSD 1.1).
- 2025-12-17 12:57: Выполнен синк в `D:\GIT_GGE\xsd`: обновлён `ExplanatoryNoteEstimate/ExplanatoryNoteEstimate.xsl`, коммит `b55d9d6` (`fix(ExplanatoryNoteEstimate): корректировка условия фильтрации коэффициентов`). `git pull`/`git push` не выполнены из-за сетевой ошибки: `Failed to connect to git.gss-plus.ru port 443`.
